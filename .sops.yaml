---
keys:
  - &ar3s3ru C8DAE39DAA00FF97
  - &github-actions age18eehnlpn44hpk4d823zfnkq72vqmf6kqhrh009uwdajneeaqzskqscx589
  # Generated manually using `age-keygen -o age.agekey`
  - &argocd age1m38eu4srfs6puqtrpcazlu5kv24fd57yda4p505k9msqjwzttujs825kzl
  # Generated using `cat /etc/ssh/ssh_host_ed25519_key.pub | ssh-to-age`,
  # where the SSH host key is obtained from the remote machine.
  - &nl-k8s-01 age1krvwskkgw5f3ufcwgl6l2jz0emxnkn40wpup2aqhqdulqy2x99js4p5fnq
  - &nl-k8s-02 age143yn95y2n546rlqrhgy2nzrz0w87ks7fk9dlwp3ylt0dfflczuhqrv2lmv
  - &nl-k8s-03 age1n6eedefn6afu4e2f492xhfhckrayvp65jp7hla3x4nwj2zwz7sasw6ls6k
  - &nl-k8s-04 age12g62sqmpz4pztx8zn94n8rxzklj7fj805g78m50kxu44yqy26azs2vph2y
creation_rules:
  - path_regex: "machines/secrets.yaml"
    key_groups:
      - pgp:
          - *ar3s3ru
        age:
          - *github-actions
          - *nl-k8s-01
          - *nl-k8s-02
          - *nl-k8s-03
          - *nl-k8s-04
  - path_regex: "machines/dejima/secrets.yaml"
    key_groups:
      - pgp:
          - *ar3s3ru
        age:
          - *github-actions
  - path_regex: "machines/nl-k8s-04/secrets.yaml"
    key_groups:
      - pgp:
          - *ar3s3ru
        age:
          - *github-actions
          - *nl-k8s-04
  - path_regex: "clusters/.*"
    key_groups:
      - pgp:
          - *ar3s3ru
        age:
          - *github-actions
  - path_regex: "modules/.*/secrets.yaml"
    key_groups:
      - pgp:
          - *ar3s3ru
        age:
          - *github-actions
          - *nl-k8s-01
          - *nl-k8s-02
          - *nl-k8s-03
          - *nl-k8s-04
  - path_regex: "modules/k3s/secrets/.*.yaml"
    encrypted_regex: "^(data|stringData)$"
    key_groups:
      - pgp:
          - *ar3s3ru
        age:
          - *github-actions
          - *nl-k8s-01
          - *nl-k8s-02
          - *nl-k8s-03
          - *nl-k8s-04
  - path_regex: "kube/.*.enc.yaml"
    encrypted_regex: "^(data|stringData)$"
    key_groups:
      - pgp:
          - *ar3s3ru
        age:
          - *argocd
